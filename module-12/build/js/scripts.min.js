"use strict";var form=document.querySelector(".js-form"),inputLink=document.querySelector("input[name=link]"),inputDescr=document.querySelector("input[name=descr]"),addBtn=document.querySelector(".form button"),container=document.querySelector("#root"),sourse=document.querySelector("#card").innerHTML.trim(),constants={links:[],delBtn:document.querySelector("#root")};function onClickDel(t){var n=t.target,e=n.nodeName,r=n.dataset.action;if("BUTTON"===e&&"delete"===r){var s=t.target.parentNode,a=Number(t.target.parentNode.dataset.id),o=constants.links.filter(function(t){return t.id!==a});constants.links=o,localStorage.setItem("links",JSON.stringify(constants.links)),s.remove(),console.log("constants.links",constants.links)}}function onClickAdd(t){var n=t.target,e=n.dataset.action;"BUTTON"===n.nodeName&&"add"===e&&(t.preventDefault(),isEnteredUrlValid(),form.reset(),constants.delBtn=document.querySelector(".link-card button"),localStorage.setItem("links",JSON.stringify(constants.links)))}function isEnteredUrlValid(){var t=inputLink.value.trim();if(!/^((https?|ftp)\:\/\/)/.test(t))return alert("Your URL is not valid");if(constants.links.some(function(t){return t.link===inputLink.value.trim()}))return alert("Such a bookmark already exists");var n={descr:inputDescr.value.trim(),link:inputLink.value.trim(),id:Date.now()};constants.links.unshift(n),console.log("constants.links:",constants.links),createTemplate(),constants.links}function createTemplate(){var t=Handlebars.compile(sourse)(constants.links[0]);container.insertAdjacentHTML("afterbegin",t)}function createTemplateFromLs(){var t=JSON.parse(localStorage.getItem("links"));if(null!==t){constants.links=t;var n=Handlebars.compile(sourse),e=constants.links.reduce(function(t,e){return t+n(e)},"");container.insertAdjacentHTML("afterbegin",e)}}createTemplateFromLs(),addBtn.addEventListener("click",onClickAdd),constants.delBtn.addEventListener("click",onClickDel);